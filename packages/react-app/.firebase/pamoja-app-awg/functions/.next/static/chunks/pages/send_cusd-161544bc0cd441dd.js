(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2776],{9982:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/send_cusd",function(){return n(6296)}])},6023:function(t,e,n){"use strict";n.r(e);var a=n(2322),i=n(2784),r=n(4265),o=n(5740),u=n(6542),s=n(2942),p=n(8735),l=n(6933),d=n(5627);async function checkCUSDBalance(t){let e=(0,r.v)({chain:p.$,transport:(0,o.d)()}),n=(0,u.uN)({address:"0x874069fa1eb16d44d622f2e0ca25eea172369bc1",abi:l.cS,client:e}),a=await n.read.balanceOf([t]);return(0,s.d)(a)}e.default=()=>{let[t,e]=(0,i.useState)(null),{address:n}=(0,d.m)();(0,i.useEffect)(()=>{let fetchBalance=async()=>{try{let t=await checkCUSDBalance(n);e(t)}catch(t){console.error("Error fetching CUSD balance:",t)}};fetchBalance()},[]);let handleClick=async()=>{try{let t=await checkCUSDBalance(n);e(t)}catch(t){console.error("Error fetching CUSD balance:",t)}};return(0,a.jsxs)("div",{className:"flex justify-center items-center h-screen flex-col",children:[t&&(0,a.jsx)("button",{className:"bg-pa_one text-pa_two font-bold py-2 px-4 rounded mb-4",onClick:handleClick,children:"Check CUSD Balance"}),t&&(0,a.jsxs)("div",{className:"text-center",children:["Your CUSD balance: ",t," CUSD"]})]})}},6296:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return send_cusd}});var a=n(2322);n(2784);var i=n(5627),r=n(6023),o=n(694),u=n(1777),s=n(4510),p=n(5408);let addContributorToDirectory=async(t,e)=>{let{_username:n,_contributorAddress:a}=e;if(window.ethereum){let e=new o.Q(window.ethereum),a=e.getSigner(t),i=new u.CH(p.z,s.Y,a);try{let e=await i.addContributorToDirectory(n,t);await e.wait()}catch(t){console.log(t)}}};var l=n(4973);let d=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],y="0x874069fa1eb16d44d622f2e0ca25eea172369bc1";var c=n(628);function parseEther(t,e="wei"){return function(t,e){let[n,a="0"]=t.split("."),i=n.startsWith("-");if(i&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===e)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>e){let[t,i,r]=[a.slice(0,e-1),a.slice(e-1,e),a.slice(e)],o=Math.round(Number(`${i}.${r}`));(a=o>9?`${BigInt(t)+BigInt(1)}0`.padStart(t.length+1,"0"):`${t}${o}`).length>e&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,e)}else a=a.padEnd(e,"0");return BigInt(`${i?"-":""}${n}${a}`)}(t,c.ez[e])}let _fundAmountInSaving=async(t,e)=>{let{_amount:n}=e;if(window.ethereum){let e=new o.Q(window.ethereum),a=e.getSigner(t),i=new u.CH(y,d,a);try{let t=await i.transfer(p.z,parseEther("".concat(n))),e=await t.wait(),a=l.$.decode(["bool"],e.transactionHash);return a.at(0)}catch(t){console.log(t)}}return!1},createAmountInSaving=async(t,e)=>{let{_amount:n,_creatingContributor:a}=e;if(window.ethereum){let e=new o.Q(window.ethereum),i=e.getSigner(t),r=new u.CH(p.z,s.Y,i);try{let e=await _fundAmountInSaving(t,{_amount:n,_creatingContributor:a});if(e){let t=await r.createAmountInSaving(n,a);t.wait()}}catch(t){}}},approvePamojaAppContractToWithdrawFunds=async(t,e)=>{let{_amount:n}=e;if(window.ethereum){let e=new o.Q(window.ethereum),a=e.getSigner(t);new u.CH(p.z,s.Y,a);let i=new u.CH(y,d,a);try{let t=await i.approve(p.z,parseEther("".concat(n))),e=await t.wait(),a=l.$.decode(["bool"],e.transactionHash);return a.at(0)}catch(t){console.log(t)}}return!1},_getRecipientContributorOfSaving=async(t,e)=>{let n,{_savingId:a}=e;if(window.ethereum){let e=new o.Q(window.ethereum),i=e.getSigner(t),r=new u.CH(p.z,s.Y,i);try{let t=await r.callStatic.getRecipientContributorAddressOfSaving(a);n=t,console.log(n)}catch(t){console.log(t)}}return n},_getWithdrawalAmountFromSaving=async(t,e)=>{let{_savingId:n}=e,a=null;if(window.ethereum){let e=new o.Q(window.ethereum),i=e.getSigner(t),r=new u.CH(p.z,s.Y,i);try{let t=await r.callStatic.getWithdrawalAmountFromSaving(n);a=parseInt(t.toString())}catch(t){console.log(t)}}return a},_updateSavingAfterWithdrawal=async(t,e)=>{let{_savingId:n}=e;if(window.ethereum){let e=new o.Q(window.ethereum),a=e.getSigner(t),i=new u.CH(p.z,s.Y,a);try{let t=await i.updateSavingAfterWithdrawal(n);await t.wait()}catch(t){console.log(t)}}},withdrawToRecipientContributor=async(t,e)=>{let{_savingId:n}=e;if(window.ethereum){let e=new o.Q(window.ethereum),a=e.getSigner(t),i=new u.CH(p.z,s.Y,a);new u.CH(y,d,a);let r=await _getRecipientContributorOfSaving(t,{_savingId:n});if(r){let e=await _getWithdrawalAmountFromSaving(t,{_savingId:n});if(e){console.log(r),console.log(e);try{let e=await i.makeWithdrawalToRecipientContributor(n);await e.wait(),await _updateSavingAfterWithdrawal(t,{_savingId:n})}catch(t){console.log(t)}}}}return!1};var send_cusd=()=>{let{address:t}=(0,i.m)();return(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:"bg-pa_two text-first font-bold py-2 px-4 rounded mb-4 border border-pa_one",onClick:e=>addContributorToDirectory(t,{_username:"andrewkimjoseph",_contributorAddress:t}),children:"Add contributor"}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{className:"bg-pa_two text-first font-bold py-2 px-4 rounded mb-4 border border-pa_one",onClick:e=>approvePamojaAppContractToWithdrawFunds(t,{_amount:250}),children:"Approve contract"}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{className:"bg-pa_two text-first font-bold py-2 px-4 rounded mb-4 border border-pa_one",onClick:e=>createAmountInSaving(t,{_amount:1,_creatingContributor:t}),children:"Create amount in saving"}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{className:"bg-pa_two text-first font-bold py-2 px-4 rounded mb-4 border border-pa_one",onClick:e=>withdrawToRecipientContributor(t,{_savingId:0}),children:"Withdraw to myself"}),(0,a.jsx)(r.default,{})]})}},4510:function(t,e,n){"use strict";n.d(e,{Y:function(){return a}});let a=[{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"address",name:"_contributorAddress",type:"address"}],name:"addContributorToDirectory",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"checkIfContributorExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"},{internalType:"address",name:"_checkingContributor",type:"address"}],name:"checkIfContributorExistsInSaving",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],name:"createAmountInSaving",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllContributors",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_address",type:"address"},{internalType:"string",name:"_username",type:"string"}],internalType:"struct Contributor[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllSavings",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],internalType:"struct Saving[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getContributionsOfContributor",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getContributionsOfSaving",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getContributorIdFromDirectory",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getContributorIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getCreatingContributor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getNumberOfContributionsOfContributor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getNumberOfContributorSavings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_creatingContributor",type:"address"}],name:"getNumberOfSavingsCreatedByContributor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getRecipientContributorAddressOfSaving",outputs:[{internalType:"address",name:"_recipientContributor",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"},{internalType:"address",name:"_savingCreator",type:"address"}],name:"getSaving",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],internalType:"struct Saving",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],name:"getSavingIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_creatingContributor",type:"address"}],name:"getSavingsCreatedByContributor",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],internalType:"struct Saving[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getTotalAmountOfContributionsOfContributor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getWithdrawalAmountFromSaving",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"makeWithdrawalToRecipientContributor",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"},{internalType:"address",name:"_newContributor",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"updateContributorInSaving",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"updateSavingAfterWithdrawal",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},5408:function(t,e,n){"use strict";n.d(e,{z:function(){return a}});let a="0xA0daB3384D6393015321d2Aa643Fb2968d800cD8"},3196:function(){}},function(t){t.O(0,[2736,8902,9774,2888,179],function(){return t(t.s=9982)}),_N_E=t.O()}]);