(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4399],{882:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/savings",function(){return n(8835)}])},8104:function(t,e,n){"use strict";n.r(e);var a=n(2322),i=n(2784),r=n(4265),u=n(5740),s=n(6542),o=n(2942),p=n(8735),l=n(6933),y=n(5627);async function checkCUSDBalance(t){let e=(0,r.v)({chain:p.$,transport:(0,u.d)()}),n=(0,s.uN)({address:"0x874069fa1eb16d44d622f2e0ca25eea172369bc1",abi:l.cS,client:e}),a=await n.read.balanceOf([t]);return(0,o.d)(a)}e.default=()=>{let[t,e]=(0,i.useState)(null),{address:n}=(0,y.m)();(0,i.useEffect)(()=>{let fetchBalance=async()=>{try{let t=await checkCUSDBalance(n);e(t)}catch(t){console.error("Error fetching CUSD balance:",t)}};fetchBalance()},[]);let handleClick=async()=>{try{let t=await checkCUSDBalance(n);e(t)}catch(t){console.error("Error fetching CUSD balance:",t)}};return(0,a.jsxs)("div",{className:"flex justify-center items-center h-screen flex-col",children:[t&&(0,a.jsx)("button",{className:"bg-pa_one text-pa_two font-bold py-2 px-4 rounded mb-4",onClick:handleClick,children:"Check CUSD Balance"}),t&&(0,a.jsxs)("div",{className:"text-center",children:["Your CUSD balance: ",t," CUSD"]})]})}},8835:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return savings}});var a=n(2322),i=n(5627),r=n(8104),u=n(694),s=n(1777),o=n(4510),p=n(5408),l=n(4973),y=n(6963),d=n(2758),c=n(480);let _fundAmountInSaving=async(t,e)=>{let{_amount:n}=e;if(window.ethereum){let e=new u.Q(window.ethereum),a=e.getSigner(t),i=new s.CH(d.E,y.e,a);try{let t=await i.transfer(p.z,(0,c.f)("".concat(n))),e=await t.wait(),a=l.$.decode(["bool"],e.transactionHash);return a.at(0)}catch(t){console.log(t)}}return!1},createAmountInSaving=async(t,e)=>{let{_amount:n,_creatingContributor:a}=e;if(window.ethereum){let e=new u.Q(window.ethereum),i=e.getSigner(t),r=new s.CH(p.z,o.Y,i);try{let e=await _fundAmountInSaving(t,{_amount:n,_creatingContributor:a});if(e){let t=await r.createAmountInSaving(n,a);t.wait()}}catch(t){}}},_getRecipientContributorOfSaving=async(t,e)=>{let n,{_savingId:a}=e;if(window.ethereum){let e=new u.Q(window.ethereum),i=e.getSigner(t),r=new s.CH(p.z,o.Y,i);try{let t=await r.callStatic.getRecipientContributorAddressOfSaving(a);n=t}catch(t){console.log(t)}}return n},_getWithdrawalAmountFromSaving=async(t,e)=>{let{_savingId:n}=e,a=null;if(window.ethereum){let e=new u.Q(window.ethereum),i=e.getSigner(t),r=new s.CH(p.z,o.Y,i);try{let t=await r.callStatic.getWithdrawalAmountFromSaving(n);a=parseInt(t.toString())}catch(t){console.log(t)}}return a},_updateSavingAfterWithdrawal=async(t,e)=>{let{_savingId:n}=e;if(window.ethereum){let e=new u.Q(window.ethereum),a=e.getSigner(t),i=new s.CH(p.z,o.Y,a);try{let t=await i.updateSavingAfterWithdrawal(n);await t.wait()}catch(t){console.log(t)}}},withdrawToRecipientContributor=async(t,e)=>{let{_savingId:n}=e;if(window.ethereum){let e=new u.Q(window.ethereum),a=e.getSigner(t),i=new s.CH(p.z,o.Y,a);new s.CH(d.E,y.e,a);let r=await _getRecipientContributorOfSaving(t,{_savingId:n});if(r){let e=await _getWithdrawalAmountFromSaving(t,{_savingId:n});if(e){console.log(r),console.log(e);try{let e=await i.makeWithdrawalToRecipientContributor(n);await e.wait(),await _updateSavingAfterWithdrawal(t,{_savingId:n})}catch(t){console.log(t)}}}}return!1};var savings=()=>{let{address:t}=(0,i.m)();return(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:"bg-pa_two text-first font-bold py-2 px-4 rounded mb-4 border border-pa_one",onClick:e=>createAmountInSaving(t,{_amount:1,_creatingContributor:t}),children:"Create amount in saving"}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{className:"bg-pa_two text-first font-bold py-2 px-4 rounded mb-4 border border-pa_one",onClick:e=>withdrawToRecipientContributor(t,{_savingId:0}),children:"Withdraw to myself"}),(0,a.jsx)(r.default,{})]})}},6963:function(t,e,n){"use strict";n.d(e,{e:function(){return a}});let a=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]},4510:function(t,e,n){"use strict";n.d(e,{Y:function(){return a}});let a=[{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"address",name:"_contributorAddress",type:"address"}],name:"addContributorToDirectory",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],name:"createAmountInSaving",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"makeWithdrawalToRecipientContributor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"},{internalType:"address",name:"_newContributor",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"updateContributorInSaving",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"updateSavingAfterWithdrawal",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"checkIfContributorExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"},{internalType:"address",name:"_checkingContributor",type:"address"}],name:"checkIfContributorExistsInSaving",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllContributors",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_address",type:"address"},{internalType:"string",name:"_username",type:"string"}],internalType:"struct Contributor[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllSavings",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],internalType:"struct Saving[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getContributionsOfContributor",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getContributionsOfSaving",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getContributor",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_address",type:"address"},{internalType:"string",name:"_username",type:"string"}],internalType:"struct Contributor",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getContributorIdFromDirectory",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getContributorIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getCreatingContributor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getCurrentRoundOfSaving",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getNumberOfContributionsOfContributor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getNumberOfContributorSavings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_creatingContributor",type:"address"}],name:"getNumberOfSavingsCreatedByContributor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getRecipientContributorAddressOfSaving",outputs:[{internalType:"address",name:"_recipientContributor",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"},{internalType:"address",name:"_savingCreator",type:"address"}],name:"getSaving",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],internalType:"struct Saving",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],name:"getSavingIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_creatingContributor",type:"address"}],name:"getSavingsCreatedByContributor",outputs:[{components:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"address",name:"_creatingContributor",type:"address"}],internalType:"struct Saving[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contributorAddress",type:"address"}],name:"getTotalAmountOfContributionsOfContributor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_savingId",type:"uint256"}],name:"getWithdrawalAmountFromSaving",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]},2758:function(t,e,n){"use strict";n.d(e,{E:function(){return a}});let a="0x874069fa1eb16d44d622f2e0ca25eea172369bc1"},5408:function(t,e,n){"use strict";n.d(e,{z:function(){return a}});let a="0x37059A2E49654D22604266a583E9da73B46A1B77"},3196:function(){},480:function(t,e,n){"use strict";n.d(e,{f:function(){return parseEther}});var a=n(628);function parseEther(t,e="wei"){return function(t,e){let[n,a="0"]=t.split("."),i=n.startsWith("-");if(i&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===e)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>e){let[t,i,r]=[a.slice(0,e-1),a.slice(e-1,e),a.slice(e)],u=Math.round(Number(`${i}.${r}`));(a=u>9?`${BigInt(t)+BigInt(1)}0`.padStart(t.length+1,"0"):`${t}${u}`).length>e&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,e)}else a=a.padEnd(e,"0");return BigInt(`${i?"-":""}${n}${a}`)}(t,a.ez[e])}}},function(t){t.O(0,[2736,8902,9774,2888,179],function(){return t(t.s=882)}),_N_E=t.O()}]);